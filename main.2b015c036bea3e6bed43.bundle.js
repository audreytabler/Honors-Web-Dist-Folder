/*! For license information please see main.2b015c036bea3e6bed43.bundle.js.LICENSE.txt */
(()=>{var e,t={679:(e,t,s)=>{"use strict";var i=s(260),a=s.n(i);class r extends i.Scene{constructor(){super({key:"TITLE_SCENE"}),this.cameras,this.player,this.cursor,this.startButton,this.startText,this.background,this.base,this.shirt,this.hair,this.uiScene}preload(){this.load.image("base1","assets/CharacterSpritesheetBald1.png"),this.load.image("base2","assets/CharacterSpritesheetBald2.png"),this.load.image("base3","assets/CharacterSpritesheetBald3.png"),this.load.image("base4","assets/CharacterSpritesheetBald4.png"),this.load.image("hair1","assets/CharacterSpriteHair1.png"),this.load.image("hair2","assets/CharacterSpriteHair2.png"),this.load.image("hair3","assets/CharacterSpriteHair2.png"),this.load.image("hair4","assets/CharacterSpriteHair4.png"),this.load.image("shirtt","assets/CharacterSpritesheetShirt.png")}create(){this.uiScene=this.scene.get("UI_SCENE"),this.add.rectangle(0,0,1109,756,5865862).setOrigin(0,0),this.add.rectangle(60,0,900,756,4745067).setOrigin(0,0),this.add.rectangle(157,220,650,130,7050393).setOrigin(0,0),this.startButton=this.add.rectangle(800,500,180,70,16777215).setInteractive(),this.startText=this.add.text(735,480,"START",{fontFamily:"sans-serif",fontStyle:"bold",fontSize:"40px",color:"#48676B"}),this.add.text(230,30,"College Simulator",{fontFamily:"courier new",fontStyle:"bold",fontSize:"50px",color:"#FFFFFF"}),this.add.text(300,80,"customize character",{fontFamily:"courier new",fontStyle:"bold",fontSize:"30px",color:"#FFFFFF"}),this.add.text(320,235,"skin tone  : ",{fontFamily:"courier new",fontStyle:"bold",fontSize:"20px",color:"#FFFFFF"}),[{x:480,color:15057071,num:1},{x:500,color:11569519,num:2},{x:520,color:8940376,num:2},{x:540,color:4666667,num:4}].forEach((e=>{this.add.circle(e.x,245,8,e.color).setInteractive().setStrokeStyle(2,4745067).on("pointerdown",(()=>{this.base.setTexture("base"+e.num),this.uiScene.skinTone=e.num}))})),this.add.text(320,265,"hair style : ",{fontFamily:"courier new",fontStyle:"bold",fontSize:"20px",color:"#FFFFFF"}),[{x:480,color:15057071,num:1},{x:500,color:11569519,num:2},{x:520,color:8940376,num:3},{x:540,color:8940376,num:4}].forEach((e=>{this.add.text(e.x,265,e.num,{fontFamily:"courier new",fontStyle:"bold",fontSize:"20px",color:"#FFFFFF"}).setInteractive().on("pointerdown",(()=>{this.hair.setTexture("hair"+e.num).setCrop(0,0,90,150),this.uiScene.hairType=e.num}))})),this.add.text(320,295,"hair color : ",{fontFamily:"courier new",fontStyle:"bold",fontSize:"20px",color:"#FFFFFF"}),[{x:480,color:16777215},{x:500,color:13420208},{x:520,color:10586239},{x:540,color:14587469},{x:560,color:10118715},{x:580,color:7162945},{x:600,color:5522754},{x:620,color:2826521},{x:640,color:8916559},{x:660,color:16755601},{x:680,color:11457921},{x:700,color:7850451},{x:720,color:6202821},{x:740,color:1668818},{x:760,color:10785983}].forEach((e=>{const t=this.add.circle(e.x,305,8,e.color).setInteractive().setStrokeStyle(2,4745067);t.on("pointerdown",(()=>{this.hair.setTint(t.fillColor),this.uiScene.hairColor=t.fillColor}))})),[{x:480,color:7481898},{x:500,color:14507844},{x:520,color:15182021},{x:540,color:15311410},{x:560,color:8217684},{x:580,color:8360295},{x:600,color:4942369},{x:620,color:6718343},{x:640,color:5414550},{x:660,color:6920628},{x:680,color:4094621},{x:700,color:3366842},{x:720,color:10061271},{x:740,color:6638773},{x:760,color:3026227},{x:780,color:16777215}].forEach((e=>{const t=this.add.circle(e.x,335,8,e.color).setInteractive().setStrokeStyle(2,4745067);t.on("pointerdown",(()=>{this.shirt.setTint(t.fillColor),this.uiScene.shirtColor=t.fillColor}))})),this.add.text(320,325,"shirt color: ",{fontFamily:"courier new",fontStyle:"bold",fontSize:"20px",color:"#FFFFFF"}),this.startButton.on("pointerover",(()=>{this.startButton.setScale(1.3),this.startText.setFontSize("50px"),this.startText.setPosition(715,474)})),this.startButton.on("pointerout",(()=>{this.startButton.setScale(1),this.startText.setFontSize("40px"),this.startText.setPosition(735,480)})),this.startButton.on("pointerdown",(()=>{this.loadSpriteSheets(),this.cameras.main.fadeOut(500,0,0,0),this.cameras.main.once(i.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,((e,t)=>{this.scene.start("DORM_SCENE")}))})),this.base=this.add.image(200,240,"base1").setOrigin(0,0).setCrop(0,0,90,150),this.hair=this.add.image(200,240,"hair1").setOrigin(0,0).setCrop(0,0,90,150),this.shirt=this.add.image(200,240,"shirtt").setOrigin(0,0).setCrop(0,0,90,150)}loadSpriteSheets(){this.load.spritesheet("player","assets/CharacterSpritesheetBald"+this.uiScene.skinTone+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("hair","assets/CharacterSpriteHair"+this.uiScene.hairType+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("shirt","assets/CharacterSpritesheetShirt.png",{frameWidth:85,frameHeight:150})}}class h extends i.GameObjects.Graphics{constructor(e,t,s,i){super(e,"DialogBox"),this.scene=e,this.height=s,this.width=t,this.isAnimating=!1,this.clickToSkip=!1,this.dialogEnabled=!1,this.goal,this.data=i,this.dialogLength,this.dialogIndex=1,this.currentIndex,this.storedDialogIdx=this.dialogIndex,this.isVisible=!1,this.clicksAllowed=!0,this.dialogList=[],this.dialogQueue=[],this.statMessage;const a=(e.sys.game.config.width-.6*t)/2,r=e.sys.game.config.height-s-10;this.dialogBox=e.add.graphics(),this.dialogBox.fillStyle(16777215,.7),this.dialogBox.fillRoundedRect(0,0,t,s,15),this.clickableBox=this.scene.add.rectangle(a+350,r+50,t,s,3585344).setInteractive(),this.clickableBox.setAlpha(.01),this.clickableBox.setData("name","clickable box"),this.clickableBox.toString=function(){return"clickable box"},this.dialogBox.setPosition(a,r),this.dialogText=e.make.text({x:a+10,y:r+10,text:"DEBUG",origin:{x:0,y:0},style:{font:"20px Courier New",fill:"black",wordWrap:{width:t-20}}}),this.dialogText.setOrigin(0,0),this.handleClicks()}getIsVisible(){return this.isVisible}disableClicks(){this.clicksAllowed=!1}enableClicks(){this.clicksAllowed=!0}handleClicks(){this.clicksAllowed&&this.clickableBox.on("pointerdown",(()=>{this.isAnimating?this.clickToSkip=!0:this.currentIndex==this.dialogLength-1?(this.nextDialog(),this.statHandler()):this.currentIndex<this.dialogLength?this.nextDialog():this.dialogEnabled&&this.hide()}),this)}setTextWithAnimation(e){if(!this.clicksAllowed)return;this.isAnimating=!0,this.clickToSkip=!1;let t=0;const s=e.length,i=()=>{if(this.isAnimating&&t<s){if(this.dialogText.setText(e.substring(0,t+1)),t++,this.clickToSkip)return this.isAnimating=!1,void this.dialogText.setText(e);requestAnimationFrame(i)}else this.isAnimating=!1};i()}startStatUpdate(e){"shower"===e?this.statMessage=this.data.statUpdates[0]:"class"===e?this.statMessage=this.data.statUpdates[1]:"sleep"===e&&(this.statMessage=this.data.statUpdates[2])}startDialogg(e){this.scene.characterMovable=!1,this.dialogQueue.push(e),1!=this.dialogEnabled&&(this.dialogEnabled=!0,e>=this.data.dialogList.length?this.dialogIndex=this.data.dialogList.length-1:this.dialogIndex=e,this.dialogLength=this.data.dialogList[e].dialog.length,this.currentIndex=0,this.nextDialog(),this.statHandler())}startDialog(){this.dialogQueue.push(this.dialogIndex),1!=this.dialogEnabled&&(this.scene.characterMovable=!1,this.dialogEnabled=!0,this.dialogIndex>=this.data.dialogList.length&&(this.dialogIndex=this.data.dialogList.length-1),this.dialogLength=this.data.dialogList[this.dialogIndex].dialog.length,this.currentIndex=0,this.dialogIndex=this.storedDialogIdx,this.nextDialog())}startDialogText(e){this.dialogQueue.push(this.dialogIndex),1!=this.dialogEnabled&&(this.scene.characterMovable=!1,this.dialogEnabled=!0,this.dialogIndex=0,this.dialogLength=0,this.currentIndex=0,this.dialogIndex=this.storedDialogIdx,this.storedDialogIdx=this.storedDialogIdx-1,this.show(e))}nextDialog(){this.show(this.data.dialogList[this.dialogIndex].dialog[this.currentIndex].text),this.currentIndex++}show(e){this.scene.clock.timeActive=!1,this.dialogBox.setVisible(!0),this.dialogText.setVisible(!0),this.isVisible=!0,this.setTextWithAnimation(e)}hide(){this.dialogQueue.length>1&&this.dialogQueue[1]==this.dialogQueue[0]&&this.dialogQueue.shift(),this.dialogQueue.shift(),this.scene.characterMovable=!0,this.scene.clock.timeActive=!0,this.dialogIndex++,this.storedDialogIdx=this.storedDialogIdx+1,this.dialogBox.setVisible(!1),this.dialogText.setVisible(!1),this.dialogText.setText(""),this.isVisible=!1,this.isAnimating=!1,this.clickToSkip=!1,this.dialogEnabled=!1,this.dialogQueue.length>0&&this.startDialogg(this.dialogQueue[0])}statHandler(){let e=this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].goal;null!=e&&(this.goal=this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].goal,this.scene.missionManager.startMission(this.goal)),this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].stat&&(e=this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].stat,"energy"===e?(console.log("energy called"),this.scene.statsOverlay.updateEnergy(this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].increment),this.scene.phone.clock.advanceTime(this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].mins)):"social"===e?(console.log("social called"),this.scene.statsOverlay.updateEnergy(this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].increment),this.scene.phone.clock.advanceTime(this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].mins)):"focus"===e&&(console.log("focus called"),this.scene.statsOverlay.updateFocus(this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].increment),this.scene.phone.clock.advanceTime(this.data.dialogList[this.dialogIndex].dialog[this.currentIndex-1].mins)))}}const o=h,n=new i.Events.EventEmitter;class l extends i.GameObjects.Graphics{constructor(e,t){super(e,"Clock"),this.scene=e,this.time={hour:7,minute:30,period:"AM"},this.sunUp=!0,this.timeScale=.001,this.clockText=null,this.deltaTime,this.start=t,this.numDays=1,this.dayOfWeek="Monday",this.weekArray=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],this.totalHours=7,this.timeActive=!1,this.clockText=this.scene.add.text(15,800,this.getTimeString(),{font:"24px Arial",fill:"#000000"});const s=this.scene.cameras.main,i=s.scrollX+850,a=s.scrollY+15;this.clockText.setPosition(i,a),this.dayWeekText=this.scene.add.text(95,265,this.dayOfWeek,{font:"18px Arial",fill:"#000000"})}update(){const e=(this.scene.time.now-this.start)*this.timeScale;this.timeActive&&this.advanceTime(e),this.clockText.setText(this.getTimeString()),this.start=this.scene.time.now,this.totalHours>6&&this.totalHours<19&&!this.sunUp&&(this.sunUp=!0,n.emit("sunUp")),this.totalHours>=19&&this.sunUp&&(console.log("total hours is "+this.totalHours),this.sunUp=!1,n.emit("sunDown"))}advanceTime(e){const t=60*this.time.hour+this.time.minute+e,s=60*this.totalHours+this.time.minute+e;this.totalHours=Math.floor(s/60),this.time.hour=Math.floor(t/60)%12||12,this.time.minute=t%60,this.time.period=this.totalHours<12?"AM":"PM",this.totalHours>=24&&(this.numDays++,this.totalHours=this.totalHours-24,this.time.hour=12+this.totalHours,this.time.minute=(t-60*this.totalHours)%60,this.updateWeekDay())}getTimeString(){const e=Math.round(this.time.minute);return`${this.time.hour.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")} ${this.time.period}`}updateWeekDay(){this.dayOfWeek=this.weekArray[(this.numDays-1)%this.weekArray.length],this.dayWeekText.setText(this.dayOfWeek),this.scene.newDay(this.dayOfWeek)}}const c=l;class d extends i.GameObjects.Graphics{constructor(e){return super(e,"PlayerStats"),this.scene=e,this.energyNum=135,this.focusNum=70,this.socialNum=70,this.emptyBars,this.energyLevel,this.focusLevel,this.socialLevel,this.energyText,this.focusText,this.socialText,this.mask,this.initialDrawAllStats(),d.instance}updateEnergy(e){this.displayUpdateEnergy(e),this.energyNum=this.energyNum+e,this.energyNum>140&&(this.energyNum=140),this.energyNum<0?this.energyNum=0:(this.energyLevel.clear(),this.energyLevel.setMask(this.mask),this.energyLevel.fillStyle(15787660,1),this.energyLevel.fillRoundedRect(0,0,this.energyNum,20,.07*this.energyNum))}updateFocus(e){this.displayUpdateText(39,e,"focus"),this.focusNum=this.focusNum+e,this.focusLevel.clear(),this.focusLevel.fillStyle(9419919,1),this.focusLevel.setMask(this.mask),this.focusNum>140&&(this.focusNum=140),this.focusNum<=0&&(this.focusNum=0),this.focusLevel.fillRoundedRect(0,0,this.focusNum,20,.07*this.focusNum)}updateSocial(e){this.displayUpdateText(65,e,"social"),this.socialNum=this.socialNum+e,this.socialLevel.clear(),this.socialLevel.fillStyle(7580098,1),this.socialLevel.setMask(this.mask),this.socialNum>140&&(this.socialNum=140),this.socialNum<=0&&(this.socialNum=0),this.socialLevel.fillRoundedRect(0,0,this.socialNum,20,.07*this.socialNum)}updatePosition(){const e=this.scene.cameras.main,t=e.scrollX+20,s=e.scrollY+10;this.emptyBars.setPosition(t,s),this.energyLevel.setPosition(t,s),this.focusLevel.setPosition(t,s+25),this.socialLevel.setPosition(t,s+50),this.energyText.setPosition(t+7,s+2),this.energyText.setText("energy: "+Math.round(this.energyNum/1.4)+"%"),this.focusText.setPosition(t+7,s+27),this.focusText.setText("focus: "+Math.round(this.focusNum/1.4)+"%"),this.socialText.setPosition(t+7,s+52),this.socialText.setText("social: "+Math.round(this.socialNum/1.4)+"%")}initialDrawAllStats(){this.updateText=this.scene.add.text(170,65,"debug text",{fontSize:"16px",fill:"white",blendMode:"OVERLAY"}).setVisible(!1),this.updateEnergyText=this.scene.add.text(170,12,"debug text",{fontSize:"16px",fill:"white",blendMode:"OVERLAY"}).setVisible(!1),this.emptyBars=this.scene.add.graphics(),this.emptyBars.fillStyle(16777215,.7),this.emptyBars.fillRoundedRect(0,0,140,20,10),this.emptyBars.fillRoundedRect(0,25,140,20,10),this.emptyBars.fillRoundedRect(0,50,140,20,10),this.mask=this.emptyBars.createGeometryMask(),this.energyLevel=this.scene.add.graphics(),this.energyLevel.fillStyle(15787660,1),this.energyLevel.fillRoundedRect(0,0,this.energyNum,20,10),this.energyLevel.setMask(this.mask),this.energyLevel.setInteractive(new i.Geom.Rectangle(7,2,140,20,10),i.Geom.Rectangle.Contains),this.energyLevel.toString=function(){return"clickable box"},this.energyLevel.on("pointerover",(()=>{this.energyText.setVisible(!0)})),this.energyLevel.on("pointerout",(()=>{this.energyText.setVisible(!1)})),this.focusLevel=this.scene.add.graphics(),this.focusLevel.fillStyle(9419919,1),this.focusLevel.fillRoundedRect(0,0,this.focusNum,20,10),this.focusLevel.setInteractive(new i.Geom.Rectangle(7,2,140,20,10),i.Geom.Rectangle.Contains),this.focusLevel.toString=function(){return"clickable box"},this.focusLevel.on("pointerover",(()=>{this.focusText.setVisible(!0)})),this.focusLevel.on("pointerout",(()=>{this.focusText.setVisible(!1)})),this.socialLevel=this.scene.add.graphics(),this.socialLevel.fillStyle(7580098,1),this.socialLevel.toString=function(){return"clickable box"},this.socialLevel.fillRoundedRect(0,0,this.socialNum,20,10),this.socialLevel.setInteractive(new i.Geom.Rectangle(7,3,140,20,10),i.Geom.Rectangle.Contains),this.socialLevel.on("pointerover",(()=>{this.socialText.setVisible(!0)})),this.socialLevel.on("pointerout",(()=>{this.socialText.setVisible(!1)})),this.energyText=this.scene.add.text(0,0,"debug text",{fontSize:"16px",fill:"purple",blendMode:"MULTIPLY"}),this.focusText=this.scene.add.text(0,25,"debug text",{fontSize:"16px",fill:"purple",blendMode:"MULTIPLY"}),this.socialText=this.scene.add.text(0,50,"debug text",{fontSize:"16px",fill:"purple",blendMode:"MULTIPLY"}),this.energyText.setVisible(!1),this.focusText.setVisible(!1),this.socialText.setVisible(!1),this.scene.events.on("update",this.updatePosition,this)}displayUpdateText(e,t,s){this.updateText.alpha=1,this.updateText.setVisible(!0),this.updateText.y=e,this.updateText.x=-10,t>0?this.updateText.setText("+"+t+" "+s):this.updateText.setText(t+" "+s),this.scene.tweens.add({targets:this.updateText,x:170,duration:500,ease:"Linear"}),this.scene.tweens.add({targets:this.updateText,alpha:0,duration:1e3,delay:1e3})}displayUpdateEnergy(e){this.updateEnergyText.alpha=1,this.updateEnergyText.setVisible(!0),this.updateEnergyText.x=-10,e>0?this.updateEnergyText.setText("+"+e+" energy"):this.updateEnergyText.setText(e+" energy"),this.scene.tweens.add({targets:this.updateEnergyText,x:170,duration:400,ease:"Linear"}),this.scene.tweens.add({targets:this.updateEnergyText,alpha:0,duration:1e3,delay:1e3})}}const p=d;class y extends i.GameObjects.Graphics{constructor(e){return super(e,"MissionManager"),y.instance||(y.instance=this,this.currentMission=0,this.missionText=this.scene.add.text(300,15,"debug text",{fontFamily:"sans-serif",fontSize:"16px",fontStyle:"bold",fill:"black",blendMode:"MULTIPLY"}),this.criteria,this.targetBox,this.criteriaMet=!1,this.criteria,this.missionInProgress=!1,this.roomToFind,this.uiScene=e),y.instance.scene=e,y.instance}startMission(e){return t=this,s=void 0,a=function*(){return console.log("mission "+e+" started"),this.missionInProgress=!0,this.criteriaMet=!1,this.criteria=e,"shower"===e?(this.uiScene.daySchedule.hasShowered||(this.drawText("Current task: Take a warm shower"),yield this.until((e=>1==this.criteriaMet)),this.scene.narrator.startDialogg(2)),void this.endMission()):"CAMPUS_SCENE"===e?(this.drawText("Current task: Leave dorm to find campus"),yield this.until((e=>1==this.criteriaMet)),this.scene.narrator.startDialogg(3),void this.endMission()):("CLASS_SCENE"===e?(this.drawText("Current task: Find the science building (top right path)"),yield this.until((e=>1==this.criteriaMet))):"107"===e&&(this.drawText("Current task: Select room 107"),yield this.until((e=>1==this.criteriaMet))),this.scene.narrator.startDialog(),void this.endMission())},new((i=void 0)||(i=Promise))((function(e,r){function h(e){try{n(a.next(e))}catch(e){r(e)}}function o(e){try{n(a.throw(e))}catch(e){r(e)}}function n(t){var s;t.done?e(t.value):(s=t.value,s instanceof i?s:new i((function(e){e(s)}))).then(h,o)}n((a=a.apply(t,s||[])).next())}));var t,s,i,a}endMission(){this.missionInProgress=!1,this.missionText.setVisible(!1)}drawText(e){this.missionText.setVisible(!0),this.missionText.setText(e)}setCriteriaMet(e){this.criteriaMet=e}shower(){console.log("showered was called in mission manager"),"shower"===this.criteria&&(this.criteriaMet=!0)}enteredMap(e){this.criteria===e&&(this.criteriaMet=!0)}checkClassRoom(e){this.criteria===e&&(this.criteriaMet=!0)}until(e){const t=s=>{e()?s():setTimeout((e=>t(s)),400)};return new Promise(t)}}const m=y;class u extends i.Scene{constructor(){super({key:"CAMPUS_SCENE"}),this.sceneActive=!0,this.cameras,this.player,this.playerSpeed=400,this.cursor,this.uiScene,this.playerEnteredTrigger=!1}preload(){this.uiScene=this.scene.get("UI_SCENE"),this.load.spritesheet("player","assets/CharacterSpritesheetBald"+this.uiScene.skinTone+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("hair","assets/CharacterSpriteHair"+this.uiScene.hairType+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("shirt","assets/CharacterSpritesheetShirt.png",{frameWidth:85,frameHeight:150}),this.load.image("tiles","assets/CollegeTileSet.png"),this.load.tilemapTiledJSON("campusMap","assets/campusMapJson.tmj")}create(){this.scene.get("UI_SCENE").newScene(this.sys.settings.key),this.uiScene=this.scene.get("UI_SCENE"),this.physics.world.enable,this.physics.world.setBounds(0,0,9035,6347),this.input.enabled=!0,this.cursor=this.input.keyboard.createCursorKeys(),this.lights.addLight(1320,850,1e3),this.lights.addLight(1890,790,1e3),this.lights.addLight(1970,790,1e3),this.lights.addLight(2050,790,1e3),this.lights.addLight(2470,790,1e3),this.lights.addLight(2720,790,1e3),this.lights.enable().setAmbientColor(this.uiScene.ambientColor);let e=this.make.tilemap({key:"campusMap"}),t=e.addTilesetImage("MainTileset","tiles"),s=(e.createLayer("grass",t).setPipeline("Light2D"),e.createLayer("details",t).setPipeline("Light2D"),e.createLayer("buildings",t).setPipeline("Light2D"));this.add.rectangle(1921,1100,200,70,7230528).setInteractive().on("pointerdown",(e=>{let t=Math.floor(32*Math.random()),s=Math.floor(9*Math.random())+1;this.uiScene.narrator.startDialogText("Campus "+this.uiScene.activitiesData.planList[t].name+" for all students is happening at "+s+" PM in the "+this.uiScene.activitiesData.planList[t].location),this.uiScene.daySchedule.addItem(s,this.uiScene.activitiesData.planList[t].name,this.uiScene.activitiesData.planList[t].location)})),this.loadPlayer(),e.createLayer("trees",t).setPipeline("Light2D"),s.setCollisionByExclusion([-1]),this.physics.add.collider(this.player,s),this.physics.add.collider(this.hair,s),this.physics.add.collider(this.shirt,s),this.overlapArray=[],e.getObjectLayer("transportation").objects.forEach((e=>{const t=this.add.rectangle(e.x,e.y,e.width,e.height);t.setOrigin(0),t.setAlpha(0),this.physics.add.existing(t,!0),this.physics.add.overlap(this.player,t,(()=>{this.uiScene.playerSpawnX=e.properties.find((e=>"playerSpawnX"===e.name)).value,this.uiScene.playerSpawnY=e.properties.find((e=>"playerSpawnY"===e.name)).value,this.playerEnteredTrigger||(this.cameras.main.fadeOut(500,0,0,0),this.cameras.main.once(i.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,((t,s)=>{this.scene.start(e.properties.find((e=>"toSceneKey"===e.name)).value)}))),this.playerEnteredTrigger=!0})),this.overlapArray.push(t)})),this.input.on("pointerdown",(e=>{console.log("player position - X:",this.player.x,"Y:",this.player.y)}))}update(){if(this.physics.overlap(this.player,this.overlapArray)||1!=this.playerEnteredTrigger||(this.playerEnteredTrigger=!1),!this.uiScene.characterMovable)return this.player.setVelocity(0,0),this.hair.setVelocity(0,0),this.shirt.setVelocity(0,0),this.player.play("idle",!0),this.shirt.play("idles",!0),void this.hair.play("idleh",!0);const{left:e,right:t,up:s,down:i}=this.cursor,{W:a,A:r,S:h,D:o}=this.input.keyboard.addKeys("W,A,S,D");e.isDown||r.isDown?(this.player.setVelocityX(-this.playerSpeed),this.player.play("left",!0),this.hair.setVelocityX(-this.playerSpeed),this.hair.play("lefth",!0),this.shirt.setVelocityX(-this.playerSpeed),this.shirt.play("lefts",!0)):t.isDown||o.isDown?(this.player.setVelocityX(this.playerSpeed),this.player.play("right",!0),this.hair.setVelocityX(this.playerSpeed),this.hair.play("righth",!0),this.shirt.setVelocityX(this.playerSpeed),this.shirt.play("rights",!0)):s.isDown||a.isDown?(this.player.setVelocityY(-this.playerSpeed),this.player.play("back",!0),this.hair.setVelocityY(-this.playerSpeed),this.hair.play("backh",!0),this.shirt.setVelocityY(-this.playerSpeed),this.shirt.play("backs",!0)):i.isDown||h.isDown?(this.player.setVelocityY(this.playerSpeed),this.player.play("forward",!0),this.hair.setVelocityY(this.playerSpeed),this.hair.play("forwardh",!0),this.shirt.setVelocityY(this.playerSpeed),this.shirt.play("forwards",!0)):(this.player.setVelocityX(0),this.player.setVelocityY(0),this.hair.setVelocityX(0),this.hair.setVelocityY(0),this.shirt.setVelocityX(0),this.shirt.setVelocityY(0),this.player.play("idle",!0),this.hair.play("idleh",!0),this.shirt.play("idles",!0))}loadPlayer(){const e=this.uiScene.playerSpawnX,t=this.uiScene.playerSpawnY;this.player=this.physics.add.sprite(e,t,"player").setOrigin(0,0),this.hair=this.physics.add.sprite(e,t,"hair").setOrigin(0,0),this.shirt=this.physics.add.sprite(e,t,"shirt").setOrigin(0,0),this.player.setBodySize(65,120),this.player.setMaxVelocity(this.playerSpeed),this.player.setPipeline("Light2D"),this.hair.setMaxVelocity(this.playerSpeed),this.hair.setBodySize(65,120),this.hair.setTint(this.uiScene.hairColor),this.hair.setPipeline("Light2D"),this.shirt.setMaxVelocity(this.playerSpeed),this.shirt.setBodySize(65,120),this.shirt.setTint(this.uiScene.shirtColor),this.shirt.setPipeline("Light2D"),this.cameras.main.startFollow(this.player,!1,.2,.2),null==this.anims.get("righth")&&(this.anims.create({key:"idle",frameRate:10,frames:this.anims.generateFrameNumbers("player",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forward",frameRate:10,frames:this.anims.generateFrameNumbers("player",{start:10,end:14}),repeat:-1}),this.anims.create({key:"left",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:15,end:17}),repeat:-1}),this.anims.create({key:"right",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:20,end:22}),repeat:-1}),this.anims.create({key:"back",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:25,end:28}),repeat:-1}),this.anims.create({key:"idleh",frameRate:10,frames:this.anims.generateFrameNumbers("hair",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forwardh",frameRate:10,frames:this.anims.generateFrameNumbers("hair",{start:10,end:14}),repeat:-1}),this.anims.create({key:"lefth",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:15,end:17}),repeat:-1}),this.anims.create({key:"righth",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:20,end:22}),repeat:-1}),this.anims.create({key:"backh",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:25,end:28}),repeat:-1}),this.anims.create({key:"idles",frameRate:10,frames:this.anims.generateFrameNumbers("shirt",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forwards",frameRate:10,frames:this.anims.generateFrameNumbers("shirt",{start:10,end:14}),repeat:-1}),this.anims.create({key:"lefts",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:15,end:17}),repeat:-1}),this.anims.create({key:"rights",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:20,end:22}),repeat:-1}),this.anims.create({key:"backs",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:25,end:28}),repeat:-1}))}fadeToNight(){const e=i.Display.Color.ValueToColor(16250871),t=i.Display.Color.ValueToColor(5921369);this.tweens.add({targets:this.lights,x:1,ease:"Linear",duration:2e3,onUpdate:s=>{const a=i.Display.Color.Interpolate.ColorWithColor(e,t,2e3,s.elapsed),r=i.Display.Color.GetColor(a.r,a.g,a.b);this.lights.setAmbientColor(r)}}).play()}fadeToDay(){const e=i.Display.Color.ValueToColor(5921369),t=i.Display.Color.ValueToColor(16250871);this.tweens.add({targets:this.lights,x:1,ease:"Linear",duration:2e3,onUpdate:s=>{const a=i.Display.Color.Interpolate.ColorWithColor(e,t,2e3,s.elapsed),r=i.Display.Color.GetColor(a.r,a.g,a.b);this.lights.setAmbientColor(r)}}).play()}}class g extends i.GameObjects.Graphics{constructor(e,t,s,i,a,r){super(e,"NPC"),this.scene=e,this.uiScene=this.scene.uiScene,this.data=this.uiScene.npcDialog,this.numberArray=this.uiScene.numberArray,this.dialogBox=this.uiScene.narrator,this.name=i,this.player=this.scene.player,this.playerhair=this.scene.hair,this.playershirt=this.scene.shirt,this.wall=this.scene.wallLayer,this.sprite=this.scene.physics.add.sprite(t,s,r,a).setOrigin(0,0),this.scene.physics.world.enable(this.sprite),this.sprite.setPipeline("Light2D"),this.sprite.setBodySize(65,120),this.sprite.setBounce(.2),this.sprite.setDrag(1e3),this.scene.physics.add.collider(this.sprite,this.player,this.handleCollision,null,this),this.scene.physics.add.collider(this.sprite,this.playerhair),this.scene.physics.add.collider(this.sprite,this.playershirt),this.scene.physics.add.collider(this.sprite,this.wall),this.sprite.body.moves=!0,this.sprite.setInteractive(),this.sprite.on("pointerdown",(e=>{console.log("sprite clicked");let t=Math.floor(22*Math.random());this.tryDialog(t)}))}preload(){}tryDialog(e){if(this.numberArray.length<this.data.studentTips.length){if(!this.numberArray.includes(e))return this.numberArray.push(e),this.uiScene.statsOverlay.updateEnergy(-5),this.uiScene.statsOverlay.updateSocial(8),void this.dialogBox.startDialogText(this.data.studentTips[e].text);e=Math.floor(22*Math.random()),this.tryDialog(e)}else console.log("numberArray is full! restarting dialog options..."),this.numberArray=[]}handleCollision(e,t){console.log("Collision detected:",e,t),e.setVelocity(0,0)}}class f extends i.Scene{constructor(){super({key:"DORM_SCENE"}),this.cameras,this.player,this.hair,this.shirt,this.playerSpeed=400,this.cursor,this.popUpText,this.popUpBox,this.emitter,this.uiScene,this.playerEnteredTrigger=!1,this.testLight,this.roommate}preload(){this.uiScene=this.scene.get("UI_SCENE"),this.load.spritesheet("player","assets/CharacterSpritesheetBald"+this.uiScene.skinTone+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("hair","assets/CharacterSpriteHair"+this.uiScene.hairType+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("shirt","assets/CharacterSpritesheetShirt.png",{frameWidth:85,frameHeight:150}),this.load.image("tiles","assets/CollegeTileSet.png"),this.load.tilemapTiledJSON("dormMap","assets/dormMap2.tmj"),this.load.image("fog","assets/fog.png"),this.load.spritesheet("npcSpritesheet","assets/CharacterSpritesheet2.png",{frameWidth:85,frameHeight:150})}create(){n.on("sunUp",this.fadeToDay,this),n.on("sunDown",this.fadeToNight,this),this.scene.get("UI_SCENE").newScene(this.sys.settings.key),this.uiScene=this.scene.get("UI_SCENE"),this.physics.world.enable,this.physics.world.setBounds(0,0,9035,6347),this.input.enabled=!0,this.cursor=this.input.keyboard.createCursorKeys(),this.usableObject=" ",this.lights.addLight(8373,5480,700),this.lights.enable().setAmbientColor(this.uiScene.ambientColor);let e=this.make.tilemap({key:"dormMap"}),t=e.addTilesetImage("MainTileset","tiles"),s=e.createLayer("grass",t);s.setScrollFactor(.8),s.setPipeline("Light2D"),e.createLayer("subfloor",t).setPipeline("Light2D"),e.createLayer("floor",t).setPipeline("Light2D");let a=e.createLayer("walls",t).setPipeline("Light2D");this.loadPlayer(),this.roommate=new g(this,7525,5840,"Alex",0,"npcSpritesheet"),this.physics.add.collider(this.player,this.roommate.body),e.createLayer("chairBacks",t).setPipeline("Light2D"),a.setCollisionByExclusion([-1]),this.physics.add.collider(this.player,a),this.physics.add.collider(this.hair,a),this.physics.add.collider(this.shirt,a),this.physics.add.collider(this.roommate.sprite,a),this.transportLayer=e.getObjectLayer("interactions"),this.popUpBox=this.add.rectangle(8209,5325,75,30,2253188,.5).setInteractive(),this.popUpBox.setVisible(!1),this.popUpText=this.add.text(8159,5305," "+this.usableObject,{fontFamily:"sans-serif",fontSize:"24px",color:"#ffffff"}),this.overlapArray=[],this.transportLayer.objects.forEach((e=>{const t=this.add.rectangle(e.x,e.y,e.width,e.height);t.setOrigin(0),t.setAlpha(0),this.physics.add.existing(t,!0);let s=null;if(e.properties&&Array.isArray(e.properties)){const t=e.properties.find((e=>"name"===e.name));s=t?t.value:null}"transport"===s?this.physics.add.overlap(this.player,t,(()=>{this.uiScene.playerSpawnX=e.properties.find((e=>"playerSpawnX"===e.name)).value,this.uiScene.playerSpawnY=e.properties.find((e=>"playerSpawnY"===e.name)).value,this.playerEnteredTrigger||(this.cameras.main.fadeOut(500,0,0,0),this.cameras.main.once(i.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,((t,s)=>{this.scene.start(e.properties.find((e=>"toSceneKey"===e.name)).value)}))),this.playerEnteredTrigger=!0})):this.physics.add.overlap(this.player,t,(()=>{this.usableObject=s,this.playerEnteredTrigger=!0,this.popUpText.setVisible(!0),this.popUpBox.setVisible(!0),this.popUpBox.width=15*this.usableObject.toString().length,this.popUpText.setText(this.usableObject),this.popUpText.setPosition(t.x+30,t.y+55),this.popUpBox.setPosition(t.x+60,t.y+70),"wash hands"===s&&(this.popUpText.setPosition(t.x+10,t.y+60),this.popUpBox.setPosition(t.x+40,t.y+75))})),this.overlapArray.push(t)})),this.popUpBox.on("pointerover",(()=>{this.popUpBox.setScale(1.3)})),this.popUpBox.on("pointerout",(()=>{this.popUpBox.setScale(1)})),this.popUpBox.on("pointerdown",(()=>{this.uiScene.daySchedule.hasShowered?n.emit(this.usableObject):(n.emit(this.usableObject),"shower"===this.usableObject&&(this.emitter=this.add.particles(7640,4500,"fog",{speed:60,gravityY:400,scale:1,duration:500,emitting:!1}),this.emitter.start()))})),this.input.on("pointerdown",(e=>{console.log("player position - X:",this.player.x,"Y:",this.player.y)}))}update(){this.physics.overlap(this.player,this.overlapArray)||1!=this.playerEnteredTrigger||(this.playerEnteredTrigger=!1,this.popUpBox.setVisible(!1),this.popUpText.setVisible(!1));const{left:e,right:t,up:s,down:i}=this.cursor,{W:a,A:r,S:h,D:o}=this.input.keyboard.addKeys("W,A,S,D");if(!this.uiScene.characterMovable)return this.player.setVelocity(0,0),this.hair.setVelocity(0,0),this.shirt.setVelocity(0,0),this.player.play("idle",!0),this.shirt.play("idles",!0),void this.hair.play("idleh",!0);e.isDown||r.isDown?(this.player.setVelocityX(-this.playerSpeed),this.player.play("left",!0),this.hair.setVelocityX(-this.playerSpeed),this.hair.play("lefth",!0),this.shirt.setVelocityX(-this.playerSpeed),this.shirt.play("lefts",!0)):t.isDown||o.isDown?(this.player.setVelocityX(this.playerSpeed),this.player.play("right",!0),this.hair.setVelocityX(this.playerSpeed),this.hair.play("righth",!0),this.shirt.setVelocityX(this.playerSpeed),this.shirt.play("rights",!0)):s.isDown||a.isDown?(this.player.setVelocityY(-this.playerSpeed),this.player.play("back",!0),this.hair.setVelocityY(-this.playerSpeed),this.hair.play("backh",!0),this.shirt.setVelocityY(-this.playerSpeed),this.shirt.play("backs",!0)):i.isDown||h.isDown?(this.player.setVelocityY(this.playerSpeed),this.player.play("forward",!0),this.hair.setVelocityY(this.playerSpeed),this.hair.play("forwardh",!0),this.shirt.setVelocityY(this.playerSpeed),this.shirt.play("forwards",!0)):(this.player.setVelocityX(0),this.player.setVelocityY(0),this.hair.setVelocityX(0),this.hair.setVelocityY(0),this.shirt.setVelocityX(0),this.shirt.setVelocityY(0),this.player.play("idle",!0),this.hair.play("idleh",!0),this.shirt.play("idles",!0))}loadPlayer(){const e=this.uiScene.playerSpawnX,t=this.uiScene.playerSpawnY;this.player=this.physics.add.sprite(e,t,"player").setOrigin(0,0),this.hair=this.physics.add.sprite(e,t,"hair").setOrigin(0,0),this.shirt=this.physics.add.sprite(e,t,"shirt").setOrigin(0,0),this.player.setBodySize(65,120),this.player.setMaxVelocity(this.playerSpeed),this.player.setPipeline("Light2D"),this.player.setBounce(.2),this.hair.setMaxVelocity(this.playerSpeed),this.hair.setBodySize(65,120),this.hair.setTint(this.uiScene.hairColor),this.hair.setPipeline("Light2D"),this.hair.setBounce(.2),this.shirt.setMaxVelocity(this.playerSpeed),this.shirt.setBodySize(65,120),this.shirt.setBounce(.2),this.shirt.setTint(this.uiScene.shirtColor),this.shirt.setPipeline("Light2D"),this.cameras.main.startFollow(this.player,!1,.2,.2),this.cameras.main.setPostPipeline("Light2D"),null==this.anims.get("righth")&&(this.anims.create({key:"idle",frameRate:10,frames:this.anims.generateFrameNumbers("player",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forward",frameRate:10,frames:this.anims.generateFrameNumbers("player",{start:10,end:14}),repeat:-1}),this.anims.create({key:"left",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:15,end:17}),repeat:-1}),this.anims.create({key:"right",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:20,end:22}),repeat:-1}),this.anims.create({key:"back",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:25,end:28}),repeat:-1}),this.anims.create({key:"idleh",frameRate:10,frames:this.anims.generateFrameNumbers("hair",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forwardh",frameRate:10,frames:this.anims.generateFrameNumbers("hair",{start:10,end:14}),repeat:-1}),this.anims.create({key:"lefth",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:15,end:17}),repeat:-1}),this.anims.create({key:"righth",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:20,end:22}),repeat:-1}),this.anims.create({key:"backh",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:25,end:28}),repeat:-1}),this.anims.create({key:"idles",frameRate:10,frames:this.anims.generateFrameNumbers("shirt",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forwards",frameRate:10,frames:this.anims.generateFrameNumbers("shirt",{start:10,end:14}),repeat:-1}),this.anims.create({key:"lefts",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:15,end:17}),repeat:-1}),this.anims.create({key:"rights",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:20,end:22}),repeat:-1}),this.anims.create({key:"backs",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:25,end:28}),repeat:-1}))}fadeToNight(){const e=i.Display.Color.ValueToColor(16250871),t=i.Display.Color.ValueToColor(5921369);this.tweens.add({targets:this.lights,x:1,ease:"Linear",duration:2e3,onUpdate:s=>{const a=i.Display.Color.Interpolate.ColorWithColor(e,t,2e3,s.elapsed),r=i.Display.Color.GetColor(a.r,a.g,a.b);this.lights.setAmbientColor(r)}}).play()}fadeToDay(){const e=i.Display.Color.ValueToColor(5921369),t=i.Display.Color.ValueToColor(16250871);this.tweens.add({targets:this.lights,x:1,ease:"Linear",duration:2e3,onUpdate:s=>{const a=i.Display.Color.Interpolate.ColorWithColor(e,t,2e3,s.elapsed),r=i.Display.Color.GetColor(a.r,a.g,a.b);this.lights.setAmbientColor(r)}}).play()}}class x extends i.GameObjects.Graphics{constructor(e){super(e,"Phone"),this.scene=e,this.clock,this.isPhoneFocused=!1,this.currentStudyHours=5,this.createPhoneComponents(),this.setupInteractivity()}createPhoneComponents(){this.phoneEdge=this.scene.add.rectangle(130,400,190,310,8421504).setInteractive(),this.phoneScreen=this.scene.add.rectangle(130,390,160,260,16777215).setInteractive(),this.homeButton=this.scene.add.rectangle(130,537,25,25,0).setInteractive(),this.reminderButton=this.scene.add.rectangle(100,350,35,35,2253188).setInteractive(),this.socialButton=this.scene.add.rectangle(150,350,35,35,3585344).setInteractive(),this.videoButton=this.scene.add.rectangle(100,400,35,35,14515283).setInteractive(),this.studyButton=this.scene.add.rectangle(150,400,35,35,10913463).setInteractive(),this.appIcons=this.scene.add.text(86,325,"✔   ☺",{fontSize:"35px",fontFamily:"fantasy",fill:"white"}),this.appIcons2=this.scene.add.text(88,377,"▶    ≡",{fontSize:"36px",fontFamily:"fantasy",fill:"white"}),this.homeContainer=this.scene.add.container(0,0),this.homeContainer.add([this.reminderButton,this.socialButton,this.videoButton,this.studyButton,this.appIcons,this.appIcons2]),this.reminderText=this.scene.add.text(53,315,"\n》ACTIVITIES TODAY《\n\n"+this.getReminderArray(),{fontSize:"14px",fill:"black",fontFamily:"sans-serif"}),this.reminderContainer=this.scene.add.container(0,0),this.reminderContainer.add(this.reminderText),this.textingButton=this.scene.add.rectangle(130,350,130,35,3585344).setInteractive().on("pointerdown",(()=>{n.emit("text")})),this.textLabel=this.scene.add.text(70,340,"text friend",{fontSize:"18px",fill:"black"}),this.hangoutButton=this.scene.add.rectangle(130,400,130,35,2253188).setInteractive().on("pointerdown",(()=>{n.emit("make plans")})),this.hangoutLabel=this.scene.add.text(70,390,"make plans",{fontSize:"16px",fill:"black"}),this.callButton=this.scene.add.rectangle(130,450,130,35,2253188).setInteractive(),this.callLabel=this.scene.add.text(70,440,"call home",{fontSize:"18px",fill:"black"}),this.socialContainer=this.scene.add.container(0,0),this.socialContainer.add([this.textingButton,this.textLabel,this.hangoutButton,this.hangoutLabel,this.callButton,this.callLabel]),this.funVideos=this.scene.add.rectangle(130,350,120,50,15109755).setInteractive(),this.educationVideos=this.scene.add.rectangle(130,410,120,50,6842737).setInteractive(),this.newsVideos=this.scene.add.rectangle(130,470,120,50,7643034).setInteractive(),this.videoContainer=this.scene.add.container(0,0),this.videoContainer.add([this.funVideos,this.educationVideos,this.newsVideos]),this.rectangleDecor=this.scene.add.rectangle(130,369,130,85,7643034),this.hoursToStudyLabel=this.scene.add.text(70,327,"  Amount of\ntime to study",{fontFamily:"arial",fontSize:"20px",fill:"black",fontWeight:"bold"}),this.hoursToStudy=this.scene.add.text(90,375,this.currentStudyHours+" hrs",{fontFamily:"arial",fontSize:"27px",fill:"black",fontWeight:"bold"}),this.currentGPALabel=this.scene.add.text(70,415,"Current GPA",{fontFamily:"arial",fontSize:"20px",fill:"black",fontWeight:"bold"}),this.currentGPAText=this.scene.add.text(93,437,"3.85",{fontFamily:"arial",fontSize:"27px",fill:"black",fontWeight:"bold"}),this.studyContainer=this.scene.add.container(0,0),this.studyContainer.add([this.rectangleDecor,this.hoursToStudyLabel,this.hoursToStudy,this.currentGPALabel,this.currentGPAText]),this.clock=new c(this.scene,this.scene.time.now),this.clock.clockText.setPosition(75,285),this.clock.dayWeekText.setPosition(95,265),this.hideAllContainers(),this.homeContainer.setVisible(!0),this.unfocusPhone()}setupInteractivity(){this.scene.input.on("pointerdown",((e,t)=>{"[object Object]"==t.toString()?this.isPhoneFocused||this.focusPhone():this.isPhoneFocused&&this.unfocusPhone()})),this.homeButton.on("pointerdown",(()=>{this.hideAllContainers(),this.homeContainer.setVisible(!0)})),this.reminderButton.on("pointerdown",(()=>{this.hideAllContainers(),this.reminderContainer.setVisible(!0)})),this.socialButton.on("pointerdown",(()=>{this.hideAllContainers(),this.socialContainer.setVisible(!0)})),this.videoButton.on("pointerdown",(()=>{this.hideAllContainers(),this.videoContainer.setVisible(!0)})),this.studyButton.on("pointerdown",(()=>{this.hideAllContainers(),this.studyContainer.setVisible(!0)}))}focusPhone(){console.log(this.phoneEdge.y),this.scene.tweens.add({targets:[this.phoneEdge,this.phoneScreen,this.homeButton,this.clock.clockText,this.clock.dayWeekText,this.homeContainer,this.reminderContainer,this.socialContainer,this.videoContainer,this.studyContainer],y:"-=250",duration:500,ease:"Power2",onComplete:()=>{this.isPhoneFocused=!0}})}unfocusPhone(){this.isPhoneFocused=!1,this.scene.tweens.add({targets:[this.phoneEdge,this.phoneScreen,this.homeButton,this.clock.clockText,this.clock.dayWeekText,this.homeContainer,this.reminderContainer,this.socialContainer,this.videoContainer,this.studyContainer],y:"+=250",duration:500,ease:"Power2",onComplete:()=>{this.isPhoneFocused=!1}})}hideAllContainers(){this.homeContainer.setVisible(!1),this.reminderContainer.setVisible(!1),this.socialContainer.setVisible(!1),this.videoContainer.setVisible(!1),this.studyContainer.setVisible(!1)}newDay(){this.scene.daySchedule.currentDayItems;for(let e=0;e<array.length;e++)array[e]}updateReminderList(){this.reminderText.setText("\n》ACTIVITIES TODAY《\n\n"+this.getReminderArray())}getReminderArray(){let e=this.scene.daySchedule.currentDayItems,t=[],s="";for(let i=0;i<e.length;i++)s="",e[i].completed?s+="☑ ":s+="☐ ",s=e[i].time>12?s+(e[i].time-12)+"PM ":12==e[i].time?s+12+"PM ":s+e[i].time+"AM ",s=s+e[i].name+" | ",s=s+e[i].location+"\n",t.push(s);return t.join("")}changeStudyHours(e){this.currentStudyHours+=e,this.currentStudyHours<=0&&(this.currentStudyHours=0),this.hoursToStudy.setText(this.currentStudyHours+" hrs")}}const S=x;class b extends i.GameObjects.Graphics{constructor(e,t){super(e,"taskConfirm"),this.scene=e,this.clock=t,this.shadedBG,this.numHours,this.numHoursText,this.text,this.upArrow,this.downArrow,this.decorContainer,this.arrows,this.confirm,this.cancel,this.isHours=!0,this.maxNumHours=12,this.chooseFriend=!1,this.action,this.setUpDisplay()}display(e){this.chooseFriend=!1,this.isHours=e,this.shadedBG.setVisible(!0),this.text.setVisible(!0),this.upArrow.setVisible(!0),"study"==this.action&&(this.maxNumHours=Math.round(this.scene.statsOverlay.focusNum/1.4/10)),this.isHours&&(this.numHours=1,this.maxNumHours=13,this.text.setText("How many hours would you like to "+this.action+" for?")),this.isHours||(this.numHours=10,this.maxNumHours=90,this.text.setText("How many minutes would you like to "+this.action+" for?")),this.numHoursText.setText(this.numHours),"make plans"==this.action&&(this.numHoursText.font="45px Courier New",this.chooseFriend=!0,this.maxNumHours=this.scene.friendsList.length-1,this.text.setText("Who would \nyou like to make plans with?"),this.numHoursText.setText(this.scene.friendsList[this.numHours])),this.numHoursText.setVisible(!0),this.downArrow.setVisible(!0),this.arrows.setVisible(!0),this.confirm.setVisible(!0),this.cancel.setVisible(!0),this.decorContainer.setVisible(!0)}hide(){this.shadedBG.setVisible(!1),this.text.setVisible(!1),this.numHoursText.setText(""),this.upArrow.setVisible(!1),this.downArrow.setVisible(!1),this.arrows.setVisible(!1),this.cancel.setVisible(!1),this.confirm.setVisible(!1),this.decorContainer.setVisible(!1)}setUpDisplay(){this.shadedBG=this.scene.add.graphics(),this.shadedBG.fillStyle(3092016,.6),this.shadedBG.fillRoundedRect(700,30,300,250,15),this.decorContainer=this.scene.add.container(0,0),this.cancel=this.scene.add.rectangle(970,60,30,30,4610687).setInteractive(),this.cancel.toString=function(){return"clickable box"},this.confirm=this.scene.add.rectangle(950,230,50,50,4610687).setInteractive(),this.confirm.toString=function(){return"clickable box"},this.arrows=this.scene.make.text({x:936,y:215,text:"✓",style:{font:"40px Courier New",fill:"white",style:"bold"}}),this.decorContainer.add(this.arrows),this.arrows=this.scene.make.text({x:960,y:40,text:"x",style:{font:"35px Courier New",fill:"white",style:"bold"}}),this.decorContainer.add(this.arrows),this.text=this.scene.make.text({x:710,y:40,text:"How many hours would you like to sleep?",origin:{x:0,y:0},style:{font:"35px Courier New",fill:"white",style:"bold",wordWrap:{width:295}}}),this.numHoursText=this.scene.make.text({x:780,y:190,style:{fontSize:"50px",fontFamily:"courier new",color:"#ffffff"}}),this.upArrow=this.scene.add.circle(750,205,15,4610687).setInteractive(),this.arrows=this.scene.make.text({x:734,y:188,text:"⏶",style:{font:"35px Courier New",fill:"white",style:"bold"}}),this.decorContainer.add(this.arrows),this.decorContainer.setDepth(1),this.upArrow.toString=function(){return"clickable box"},this.upArrow.on("pointerdown",(()=>{this.isHours?this.numHours<this.maxNumHours&&(this.numHours++,this.numHoursText.setText(this.numHours),"make plans"==this.action&&this.numHoursText.setText(this.scene.friendsList[this.numHours])):this.numHours<this.maxNumHours&&(this.numHours+=10,this.numHoursText.setText(this.numHours))})),this.cancel.on("pointerdown",(()=>{this.hide()})),this.confirm.on("pointerdown",(()=>{this.confirmTask()})),this.downArrow=this.scene.add.circle(750,240,15,4610687).setInteractive(),this.arrows=this.scene.make.text({x:734,y:225,text:"⏷",style:{font:"35px Courier New",fill:"white",style:"bold"}}),this.downArrow.toString=function(){return"clickable box"},this.downArrow.on("pointerdown",(()=>{this.isHours?(this.numHours>0&&this.numHours--,this.numHoursText.setText(this.numHours),"make plans"==this.action&&this.numHoursText.setText(this.scene.friendsList[this.numHours])):this.numHours>0&&(this.numHours-=10,this.numHoursText.setText(this.numHours))})),this.hide()}makePlans(){this.isHours=!0}confirmTask(){this.hide();let e=0;"make plans"!=this.action?(this.isHours?(e=14*this.numHours,this.scene.clock.advanceTime(60*this.numHours),this.scene.narrator.startDialogText("You "+this.action+" for "+this.numHours+" hours.")):(e=.6*this.numHours,this.scene.clock.advanceTime(this.numHours),this.scene.narrator.startDialogText("You "+this.action+" for "+this.numHours+" minutes.")),"sleep"===this.action&&this.scene.statsOverlay.updateEnergy(e),"study"===this.action&&(this.scene.statsOverlay.updateFocus(-e),this.scene.statsOverlay.updateEnergy(-e),this.scene.phone.changeStudyHours(-this.numHours)),"chat"===this.action&&(this.scene.statsOverlay.updateSocial(e),this.scene.statsOverlay.updateEnergy(-e)),"read"===this.action&&(this.scene.statsOverlay.updateFocus(e),this.scene.statsOverlay.updateEnergy(-e)),"call home"===this.action&&(this.scene.statsOverlay.updateSocial(e),this.scene.statsOverlay.updateEnergy(-e)),"text"===this.action&&(this.scene.statsOverlay.updateSocial(e),this.scene.statsOverlay.updateEnergy(-e)),"scroll on social media"===this.action&&(this.scene.statsOverlay.updateSocial(.5*e),this.scene.statsOverlay.updateFocus(.5*e),this.scene.statsOverlay.updateEnergy(-e)),"view flash cards"===this.action&&(this.scene.statsOverlay.updateFocus(-e),this.scene.statsOverlay.updateEnergy(.5*-e))):this.scene.submitPlans(this.numHours)}}const w=b;class T extends i.GameObjects.Graphics{constructor(e,t,s){super(e,"DaySchedule"),this.scene=e,this.clock=t,this.phone=s,this.mondayItems=[{time:10,name:"PYS",location:"107",completed:!1},{time:11,name:"BIO",location:"102",completed:!1},{time:13,name:"ENG",location:"105",completed:!1}],this.tuesdayItems=[{time:11,name:"SCI",location:"107",completed:!1}],this.wednesdayItems=[],this.thursdayItems=[],this.fridayItems=[],this.saturdayItems=[],this.sundayItems=[],this.currentDayItems=[{time:10,name:"PYS",location:"107",completed:!1},{time:11,name:"BIO",location:"102",completed:!1},{time:13,name:"ENG",location:"105",completed:!1}],this.hasShowered=!1,this.recommendedStudy=1,this.timeStudiedThisWeek}newDay(e){this.hasShowered=!1,this.currentDayItems=[],"sunday"==e&&(this.currentDayItems=this.sundayItems),"monday"==e&&(this.currentDayItems=this.mondayItems),"tuesday"==e&&(this.currentDayItems=this.tuesdayItems),"wednesday"==e&&(this.currentDayItems=this.wednesdayItems),"thursday"==e&&(this.currentDayItems=this.thursdayItems),"friday"==e&&(this.currentDayItems=this.fridayItems),"saturday"==e&&(this.currentDayItems=this.saturdayItems),this.scene.phone.updateReminderList(),this.scene.phone.changeStudyHours(Math.floor(5*Math.random())+1)}newWeek(){}findRoomOnSchedule(e){for(let t=0;t<this.currentDayItems.length;t++)if(this.currentDayItems[t].location===e)return t;return null}completeItem(e){this.currentDayItems[e].completed=!0,this.scene.phone.updateReminderList()}addItem(e,t,s){this.currentDayItems.push({time:e,name:t,location:s,completed:!1}),this.scene.phone.updateReminderList()}}class k extends i.Scene{constructor(){super({key:"UI_SCENE",active:!0}),this.clock,this.phone,this.narrator,this.taskConfirm,this.statsOverlay,this.missionManager,this.activeScene,this.playerSpawnX=8159,this.playerSpawnY=5325,this.skinTone=1,this.hairType=1,this.hairColor=7162945,this.shirtColor=6920628,this.ambientColor=16250871,this.tutorialInProgress=!0,this.daySchedule,this.characterMovable=!0,this.numberArray=[],this.npcDialog,this.activitiesData}preload(){this.load.json("narrator","assets/narratorDialog.json"),this.load.json("npc-dialog","assets/npcDialog.json"),this.load.json("campusActivities","assets/campusActivities.json")}create(){this.friendsList=["Alice","Bob","Lucy"],this.classScene=this.scene.get("CLASS_SCENE"),this.daySchedule=new T(this,this.clock,this.phone),this.activitiesData=this.cache.json.get("campusActivities"),this.phone=new S(this),this.clock=this.phone.clock,this.npcDialog=this.cache.json.get("npc-dialog"),this.narrator=new o(this,700,100,this.cache.json.get("narrator")),this.narrator.startDialog(0),this.statsOverlay=new p(this),this.missionManager=new m(this),this.missionManager.drawText("CURRENT TASK: "),this.taskConfirm=new w(this,this.clock,this.cache.json.get("campusActivities")),n.on("shower",this.shower,this),n.on("wash hands",this.washHands,this),n.on("text",this.text,this),n.on("call home",this.callHome,this),n.on("make plans",this.makePlans,this),n.on("plans submit",this.submitPlans,this),n.on("class",this.class,this),n.on("sleep",this.sleep,this),n.on("study",this.study,this),n.on("read books",this.read,this),n.on("sunUp",this.sunUp,this),n.on("sunDown",this.sunDown,this)}update(){this.clock.update()}newScene(e){this.activeScene=e,this.missionManager.enteredMap(e)}shower(){this.characterMovable&&(this.daySchedule.hasShowered?this.narrator.startDialogText("You've already showered this morning"):(this.narrator.startDialogg(0),this.missionManager.shower(),this.daySchedule.hasShowered=!0))}class(){this.narrator.startDialogg(3)}clickClassRoom(e){if(this.tutorialInProgress)return this.missionManager.checkClassRoom(e),void(this.tutorialInProgress=!1);let t=this.daySchedule.findRoomOnSchedule(e);if(null!=t){var s=60*this.daySchedule.currentDayItems[t].time-10,i=60*this.daySchedule.currentDayItems[t].time,a=60*this.daySchedule.currentDayItems[t].time+50,r=60*this.phone.clock.totalHours+this.phone.clock.time.minute;r<s?this.narrator.startDialogText("You have a class in this room later today. Doors will open at "+(Math.round(s/60)-1)+":50"):r>=s&&r<=i+1?(this.narrator.startDialogText("Welcome to class! You arrived on time and will receive attendance points!"),this.daySchedule.currentDayItems[t].completed=!0,this.daySchedule.completeItem[t],this.clock.advanceTime(47),this.phone.updateReminderList()):r>i+1&&r<a?(this.narrator.startDialogText("You are "+Math.round(r-i)+" minutes late to class. You may attend the remaining portion of the class"),this.daySchedule.completeItem[t],this.clock.advanceTime(47-(r-i)),this.daySchedule.currentDayItems[t].completed=!0,this.phone.updateReminderList()):this.narrator.startDialogText("This class is already over")}else this.narrator.startDialogText("You have no classes in this room today")}sleep(){this.taskConfirm.action="sleep",this.taskConfirm.display(!0)}study(){this.taskConfirm.action="study",this.taskConfirm.display(!0)}washHands(){this.narrator.startDialogText("You washed your hands!"),this.statsOverlay.updateFocus(5)}text(){this.taskConfirm.action="text",this.taskConfirm.display(!1)}read(){this.taskConfirm.action="read",this.taskConfirm.display(!1)}callHome(){this.taskConfirm.action="call home",this.taskConfirm.display(!1)}makePlans(){this.taskConfirm.action="make plans",this.taskConfirm.display(!0)}submitPlans(e){let t=Math.floor(32*Math.random()),s=Math.floor(9*Math.random())+1;this.narrator.startDialogText(this.friendsList[e]+" wants to go "+this.activitiesData.planList[t].prefix+this.activitiesData.planList[t].name+" at "+s+"PM. Does this work with your schedule?"),this.daySchedule.addItem(s,this.activitiesData.planList[t].name,this.activitiesData.planList[t].location)}newDay(e){this.daySchedule.newDay(e)}sunUp(){this.ambientColor=16250871}sunDown(){this.ambientColor=5921369}}class C extends i.Scene{constructor(){super({key:"CLASS_SCENE"}),this.cameras,this.player,this.playerSpeed=400,this.cursor,this.popUp,this.uiScene,this.popUpBox,this.overlapArray,this.playerEnteredTrigger=!1}preload(){this.uiScene=this.scene.get("UI_SCENE"),this.load.spritesheet("player","assets/CharacterSpritesheetBald"+this.uiScene.skinTone+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("hair","assets/CharacterSpriteHair"+this.uiScene.hairType+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("shirt","assets/CharacterSpritesheetShirt.png",{frameWidth:85,frameHeight:150}),this.load.image("popUp","assets/enter.png"),this.load.image("tiles","assets/CollegeTileSet.png"),this.load.tilemapTiledJSON("classMap","assets/ClassMap.tmj")}create(){this.scene.get("UI_SCENE").newScene(this.sys.settings.key),this.uiScene=this.scene.get("UI_SCENE"),this.physics.world.enable,this.physics.world.setBounds(0,0,9035,6347),this.input.enabled=!0,this.cursor=this.input.keyboard.createCursorKeys();let e=this.make.tilemap({key:"classMap"}),t=e.addTilesetImage("MainTileset","tiles"),s=(e.createLayer("background",t),e.createLayer("walls",t));this.loadPlayer(),s.setCollisionByExclusion([-1]),this.physics.add.collider(this.player,s),this.physics.add.collider(this.hair,s),this.physics.add.collider(this.shirt,s);const a=e.getObjectLayer("transportation");this.overlapArray=[],a.objects.forEach((e=>{const t=this.add.rectangle(e.x,e.y,e.width,e.height);t.setOrigin(0),t.setAlpha(0),this.physics.add.existing(t,!0),this.physics.add.overlap(this.player,t,(()=>{this.playerEnteredTrigger||(this.cameras.main.fadeOut(1e3,0,0,0),this.cameras.main.once(i.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,((t,s)=>{this.scene.start(e.properties.find((e=>"toSceneKey"===e.name)).value)}))),this.playerEnteredTrigger=!0,this.overlapArray.push(t)}))})),e.getObjectLayer("RoomNumbers").objects.forEach((e=>{const t=this.add.rectangle(e.x,e.y,e.width,e.height);t.setOrigin(0),t.setAlpha(0),this.physics.add.existing(t,!0),this.physics.add.overlap(this.player,t,(()=>{this.usableObject=e.properties.find((e=>"roomNumber"===e.name)).value,this.playerEnteredTrigger||this.uiScene.clickClassRoom(this.usableObject),this.playerEnteredTrigger=!0,this.popUpText.setVisible(!0),this.popUpBox.setVisible(!0),this.popUpBox.width=15*this.usableObject.toString().length,this.popUpText.setText(this.usableObject),this.popUpText.setPosition(t.x,t.y),this.popUpBox.setPosition(t.x+30,t.y+15)})),this.overlapArray.push(t)})),this.popUpBox=this.add.rectangle(8209,5325,75,30,2253188,.5).setInteractive(),this.popUpBox.setVisible(!1),this.popUpBox.setInteractive(),this.popUpBox.setInteractive(),this.popUpText=this.add.text(8159,5305," "+this.usableObject,{fontFamily:"sans-serif",fontSize:"24px",color:"#ffffff"}),this.popUpBox.on("pointerover",(()=>{this.popUpBox.setScale(1.3)})),this.popUpBox.on("pointerout",(()=>{this.popUpBox.setScale(1)})),this.popUpBox.on("pointerdown",(()=>{this.uiScene.clickClassRoom(this.usableObject)})),this.input.on("pointerdown",(e=>{console.log("player position - X:",this.player.x,"Y:",this.player.y)}))}update(){if(this.physics.overlap(this.player,this.overlapArray)||1!=this.playerEnteredTrigger||(this.playerEnteredTrigger=!1,this.popUpBox.setVisible(!1),this.popUpText.setVisible(!1)),!this.uiScene.characterMovable)return this.player.setVelocity(0,0),this.hair.setVelocity(0,0),this.shirt.setVelocity(0,0),this.player.play("idle",!0),this.shirt.play("idles",!0),void this.hair.play("idleh",!0);const{left:e,right:t,up:s,down:i}=this.cursor,{W:a,A:r,S:h,D:o}=this.input.keyboard.addKeys("W,A,S,D");e.isDown||r.isDown?(this.player.setVelocityX(-this.playerSpeed),this.player.play("left",!0),this.hair.setVelocityX(-this.playerSpeed),this.hair.play("lefth",!0),this.shirt.setVelocityX(-this.playerSpeed),this.shirt.play("lefts",!0)):t.isDown||o.isDown?(this.player.setVelocityX(this.playerSpeed),this.player.play("right",!0),this.hair.setVelocityX(this.playerSpeed),this.hair.play("righth",!0),this.shirt.setVelocityX(this.playerSpeed),this.shirt.play("rights",!0)):s.isDown||a.isDown?(this.player.setVelocityY(-this.playerSpeed),this.player.play("back",!0),this.hair.setVelocityY(-this.playerSpeed),this.hair.play("backh",!0),this.shirt.setVelocityY(-this.playerSpeed),this.shirt.play("backs",!0)):i.isDown||h.isDown?(this.player.setVelocityY(this.playerSpeed),this.player.play("forward",!0),this.hair.setVelocityY(this.playerSpeed),this.hair.play("forwardh",!0),this.shirt.setVelocityY(this.playerSpeed),this.shirt.play("forwards",!0)):(this.player.setVelocityX(0),this.player.setVelocityY(0),this.hair.setVelocityX(0),this.hair.setVelocityY(0),this.shirt.setVelocityX(0),this.shirt.setVelocityY(0),this.player.play("idle",!0),this.hair.play("idleh",!0),this.shirt.play("idles",!0))}loadPlayer(){let e=1433,t=2694;this.player=this.physics.add.sprite(e,t,"player").setOrigin(0,0),this.hair=this.physics.add.sprite(e,t,"hair").setOrigin(0,0),this.shirt=this.physics.add.sprite(e,t,"shirt").setOrigin(0,0),this.player.setBodySize(65,120),this.player.setMaxVelocity(this.playerSpeed),this.player.setBounce(.2),this.hair.setMaxVelocity(this.playerSpeed),this.hair.setBodySize(65,120),this.hair.setBounce(.2),this.hair.setTint(this.uiScene.hairColor),this.shirt.setMaxVelocity(this.playerSpeed),this.shirt.setBodySize(65,120),this.shirt.setBounce(.2),this.shirt.setTint(this.uiScene.shirtColor),this.player.body.allowGravity=!1,this.player.setBodySize(65,120),this.player.setCollideWorldBounds(!0),this.cameras.main.startFollow(this.player,!1,.2,.2),this.anims.create({key:"idle",frameRate:10,frames:this.anims.generateFrameNumbers("player",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forward",frameRate:10,frames:this.anims.generateFrameNumbers("player",{start:10,end:14}),repeat:-1}),this.anims.create({key:"left",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:15,end:17}),repeat:-1}),this.anims.create({key:"right",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:20,end:22}),repeat:-1}),this.anims.create({key:"back",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:25,end:28}),repeat:-1}),this.anims.create({key:"idleh",frameRate:10,frames:this.anims.generateFrameNumbers("hair",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forwardh",frameRate:10,frames:this.anims.generateFrameNumbers("hair",{start:10,end:14}),repeat:-1}),this.anims.create({key:"lefth",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:15,end:17}),repeat:-1}),this.anims.create({key:"righth",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:20,end:22}),repeat:-1}),this.anims.create({key:"backh",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:25,end:28}),repeat:-1}),this.anims.create({key:"idles",frameRate:10,frames:this.anims.generateFrameNumbers("shirt",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forwards",frameRate:10,frames:this.anims.generateFrameNumbers("shirt",{start:10,end:14}),repeat:-1}),this.anims.create({key:"lefts",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:15,end:17}),repeat:-1}),this.anims.create({key:"rights",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:20,end:22}),repeat:-1}),this.anims.create({key:"backs",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:25,end:28}),repeat:-1})}}class v extends i.Scene{constructor(){super({key:"GYM_SCENE"}),this.cameras,this.player,this.playerSpeed=400,this.cursor,this.popUp,this.uiScene,this.popUpBox,this.overlapArray,this.playerEnteredTrigger=!1}preload(){this.uiScene=this.scene.get("UI_SCENE"),this.load.spritesheet("player","assets/CharacterSpritesheetBald"+this.uiScene.skinTone+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("hair","assets/CharacterSpriteHair"+this.uiScene.hairType+".png",{frameWidth:85,frameHeight:150}),this.load.spritesheet("shirt","assets/CharacterSpritesheetShirt.png",{frameWidth:85,frameHeight:150}),this.load.image("popUp","assets/enter.png"),this.load.image("gymBg","assets/campusGym.png"),this.load.image("tiles","assets/CollegeTileSet.png"),this.load.tilemapTiledJSON("gymMap","assets/gymMap.tmj")}create(){this.scene.get("UI_SCENE").newScene(this.sys.settings.key),this.uiScene=this.scene.get("UI_SCENE"),this.physics.world.enable,this.physics.world.setBounds(0,0,9035,6347),this.input.enabled=!0,this.cursor=this.input.keyboard.createCursorKeys(),this.physics.add.image(0,0,"gymBg").setOrigin(0,0);let e=this.make.tilemap({key:"gymMap"}),t=e.addTilesetImage("CollegeTileSet","tiles"),s=e.createLayer("wallLayer",t);s.setAlpha(0),this.loadPlayer(),s.setCollisionByExclusion([-1]),this.physics.add.collider(this.player,s),this.physics.add.collider(this.hair,s),this.physics.add.collider(this.shirt,s);const a=e.getObjectLayer("transportation_layer");this.overlapArray=[],a.objects.forEach((e=>{const t=this.add.rectangle(e.x,e.y,e.width,e.height);t.setOrigin(0),t.setAlpha(0),this.physics.add.existing(t,!0),this.physics.add.overlap(this.player,t,(()=>{this.uiScene.playerSpawnX=e.properties.find((e=>"playerSpawnX"===e.name)).value,this.uiScene.playerSpawnY=e.properties.find((e=>"playerSpawnY"===e.name)).value,this.playerEnteredTrigger||(this.cameras.main.fadeOut(1e3,0,0,0),this.cameras.main.once(i.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,((t,s)=>{this.scene.start(e.properties.find((e=>"toSceneKey"===e.name)).value)}))),this.playerEnteredTrigger=!0,this.overlapArray.push(t)}))})),this.popUpBox=this.add.rectangle(8209,5325,75,30,2253188,.5).setInteractive(),this.popUpBox.setVisible(!1),this.popUpBox.setInteractive(),this.popUpBox.setInteractive(),this.popUpText=this.add.text(8159,5305," "+this.usableObject,{fontFamily:"sans-serif",fontSize:"24px",color:"#ffffff"}),this.popUpBox.on("pointerover",(()=>{this.popUpBox.setScale(1.3)})),this.popUpBox.on("pointerout",(()=>{this.popUpBox.setScale(1)})),this.popUpBox.on("pointerdown",(()=>{this.uiScene.clickClassRoom(this.usableObject)})),this.input.on("pointerdown",(e=>{console.log("player position - X:",this.player.x,"Y:",this.player.y)}))}update(){if(this.physics.overlap(this.player,this.overlapArray)||1!=this.playerEnteredTrigger||(this.playerEnteredTrigger=!1,this.popUpBox.setVisible(!1),this.popUpText.setVisible(!1)),!this.uiScene.characterMovable)return this.player.setVelocity(0,0),this.hair.setVelocity(0,0),this.shirt.setVelocity(0,0),this.player.play("idle",!0),this.shirt.play("idles",!0),void this.hair.play("idleh",!0);const{left:e,right:t,up:s,down:i}=this.cursor,{W:a,A:r,S:h,D:o}=this.input.keyboard.addKeys("W,A,S,D");e.isDown||r.isDown?(this.player.setVelocityX(-this.playerSpeed),this.player.play("left",!0),this.hair.setVelocityX(-this.playerSpeed),this.hair.play("lefth",!0),this.shirt.setVelocityX(-this.playerSpeed),this.shirt.play("lefts",!0)):t.isDown||o.isDown?(this.player.setVelocityX(this.playerSpeed),this.player.play("right",!0),this.hair.setVelocityX(this.playerSpeed),this.hair.play("righth",!0),this.shirt.setVelocityX(this.playerSpeed),this.shirt.play("rights",!0)):s.isDown||a.isDown?(this.player.setVelocityY(-this.playerSpeed),this.player.play("back",!0),this.hair.setVelocityY(-this.playerSpeed),this.hair.play("backh",!0),this.shirt.setVelocityY(-this.playerSpeed),this.shirt.play("backs",!0)):i.isDown||h.isDown?(this.player.setVelocityY(this.playerSpeed),this.player.play("forward",!0),this.hair.setVelocityY(this.playerSpeed),this.hair.play("forwardh",!0),this.shirt.setVelocityY(this.playerSpeed),this.shirt.play("forwards",!0)):(this.player.setVelocityX(0),this.player.setVelocityY(0),this.hair.setVelocityX(0),this.hair.setVelocityY(0),this.shirt.setVelocityX(0),this.shirt.setVelocityY(0),this.player.play("idle",!0),this.hair.play("idleh",!0),this.shirt.play("idles",!0))}loadPlayer(){let e=1842,t=2599;this.player=this.physics.add.sprite(e,t,"player").setOrigin(0,0),this.hair=this.physics.add.sprite(e,t,"hair").setOrigin(0,0),this.shirt=this.physics.add.sprite(e,t,"shirt").setOrigin(0,0),this.player.setBodySize(65,120),this.player.setMaxVelocity(this.playerSpeed),this.hair.setMaxVelocity(this.playerSpeed),this.hair.setBodySize(65,120),this.hair.setTint(this.uiScene.hairColor),this.shirt.setMaxVelocity(this.playerSpeed),this.shirt.setBodySize(65,120),this.shirt.setTint(this.uiScene.shirtColor),this.player.body.allowGravity=!1,this.player.setBodySize(65,120),this.player.setCollideWorldBounds(!0),this.cameras.main.startFollow(this.player,!1,.2,.2),this.anims.create({key:"idle",frameRate:10,frames:this.anims.generateFrameNumbers("player",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forward",frameRate:10,frames:this.anims.generateFrameNumbers("player",{start:10,end:14}),repeat:-1}),this.anims.create({key:"left",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:15,end:17}),repeat:-1}),this.anims.create({key:"right",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:20,end:22}),repeat:-1}),this.anims.create({key:"back",frameRate:7,frames:this.anims.generateFrameNumbers("player",{start:25,end:28}),repeat:-1}),this.anims.create({key:"idleh",frameRate:10,frames:this.anims.generateFrameNumbers("hair",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forwardh",frameRate:10,frames:this.anims.generateFrameNumbers("hair",{start:10,end:14}),repeat:-1}),this.anims.create({key:"lefth",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:15,end:17}),repeat:-1}),this.anims.create({key:"righth",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:20,end:22}),repeat:-1}),this.anims.create({key:"backh",frameRate:7,frames:this.anims.generateFrameNumbers("hair",{start:25,end:28}),repeat:-1}),this.anims.create({key:"idles",frameRate:10,frames:this.anims.generateFrameNumbers("shirt",{start:0,end:0}),repeat:-1}),this.anims.create({key:"forwards",frameRate:10,frames:this.anims.generateFrameNumbers("shirt",{start:10,end:14}),repeat:-1}),this.anims.create({key:"lefts",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:15,end:17}),repeat:-1}),this.anims.create({key:"rights",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:20,end:22}),repeat:-1}),this.anims.create({key:"backs",frameRate:7,frames:this.anims.generateFrameNumbers("shirt",{start:25,end:28}),repeat:-1})}}const D=document.getElementById("gameCanvas"),V=new(a().Game)({type:a().WEBGL,canvas:D,pixelArt:!1,scale:{parent:"game-container",width:1024,height:576,mode:a().Scale.FIT,autoCenter:a().Scale.CENTER_BOTH},backgroundColor:"#000000",physics:{default:"arcade",arcade:{debug:!1}}});V.scene.add("CAMPUS_SCENE",u),V.scene.add("CLASS_SCENE",C),V.scene.add("DORM_SCENE",f),V.scene.add("GYM_SCENE",v),V.scene.add("UI_SCENE",k),V.scene.add("TITLE_SCENE",r),V.scene.start("TITLE_SCENE")},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var r=s[e]={exports:{}};return t[e].call(r.exports,r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,s,a,r)=>{if(!s){var h=1/0;for(c=0;c<e.length;c++){for(var[s,a,r]=e[c],o=!0,n=0;n<s.length;n++)(!1&r||h>=r)&&Object.keys(i.O).every((e=>i.O[e](s[n])))?s.splice(n--,1):(o=!1,r<h&&(h=r));if(o){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,a,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,r,[h,o,n]=s,l=0;if(h.some((t=>0!==e[t]))){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);if(n)var c=n(i)}for(t&&t(s);l<h.length;l++)r=h[l],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i.O(void 0,[216],(()=>i(679)));var a=i.O(void 0,[216],(()=>i(204)));a=i.O(a)})();